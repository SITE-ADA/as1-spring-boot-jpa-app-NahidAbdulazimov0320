<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management</title>
</head>
<body>
    <h1>Student Management</h1>

    <!-- Create Student Form -->
    <h2>Create Student</h2>
    <form id="createStudentForm">
        <label for="name">Name:</label>
        <input type="text" id="createName" name="name"><br><br>
        <label for="id">ID:</label>
        <input type="text" id="createId" name="id"><br><br>
        <button type="submit" onclick="createStudent()">Submit</button>
    </form>

    <!-- Get Student by ID Form -->
    <h2>Get Student by ID</h2>
    <form id="getStudentForm">
        <label for="getById">Enter ID:</label>
        <input type="text" id="getById" name="id"><br><br>
        <button type="button" onclick="getStudentById()">Get Student</button>
    </form>
    <div id="studentInfo"></div>

    <!-- Update Student Form -->
    <h2>Update Student</h2>
    <form id="updateStudentForm">
        <label for="updateName">Name:</label>
        <input type="text" id="updateName" name="name"><br><br>
        <label for="updateId">ID:</label>
        <input type="text" id="updateId" name="id"><br><br>
        <button type="submit" onclick="updateStudent()">Update Student</button>
    </form>

    <!-- Delete Student Form -->
    <h2>Delete Student</h2>
    <form id="deleteStudentForm">
        <label for="deleteId">Enter ID:</label>
        <input type="text" id="deleteId" name="id"><br><br>
        <button type="button" onclick="deleteStudent()">Delete Student</button>
    </form>

    <script>
        function createStudent() {
            const name = document.getElementById("createName").value;
            const id = document.getElementById("createId").value;
            const data = {
                name: name,
                id: id
            };

            // Perform fetch request to create student
            fetch('/students', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    alert('Student created successfully');
                } else {
                    alert('Error creating student');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error creating student');
            });
        }

        function getStudentById() {
            const id = document.getElementById("getById").value;

            // Perform fetch request to get student by ID
            fetch(`/students/${id}`)
            .then(response => response.json())
            .then(student => {
                if (student) {
                    document.getElementById("studentInfo").innerText = `Name: ${student.name}, ID: ${student.id}`;
                } else {
                    document.getElementById("studentInfo").innerText = 'Student not found';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error getting student');
            });
        }

        function updateStudent() {
            const name = document.getElementById("updateName").value;
            const id = document.getElementById("updateId").value;
            const data = {
                name: name,
                id: id
            };

            // Perform fetch request to update student
            fetch(`/students/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    alert('Student updated successfully');
                } else {
                    alert('Error updating student');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error updating student');
            });
        }

        function deleteStudent() {
            const id = document.getElementById("deleteId").value;

            // Perform fetch request to delete student
            fetch(`/students/${id}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    alert('Student deleted successfully');
                } else {
                    alert('Error deleting student');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error deleting student');
            });
        }
    </script>
</body>
</html>
